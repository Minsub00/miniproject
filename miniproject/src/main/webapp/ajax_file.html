<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ajax로 파일 로드 및 setTimeout 사용방법</title>
</head>
<style>
.box {
	width: 100px;
	height: 30px;
	color: white;
	background-color: black;
	text-align: center;
	line-height: 30px;
	font-size: 12px;
}
</style>
<body>
	<div class="box" id="box"></div>
	<input type="button" value="실행" onclick="gopage()">
	<div id="ag"></div>
	<div id="ag2"></div>
</body>
<script>
	var time = 5; // 카운팅 숫자
	function aaa() {
		document.getElementById("box").innerText = "광고중" + time + "초";
		time--;
		if (time >= 0) {
			setTimeout(aaa, 1000); // 1초마다 aaa 함수 실행
		} else {
			document.getElementById("box").innerText = "Skip";
		}
	}
	setTimeout(aaa, 1000); // 페이지 실행 1초 후 aaa 함수 실행

	// ajax I/O  형태로 파일을 로드하여 해당 내용을 HTML에 출력하는 방식
	window.onload = function() {
		var http = new XMLHttpRequest;
		http.open("GET", "./realty/agree1.txt", false); // GET 통신을 이용하여 해당 파일 로드
		http.send(); // 통신 실행
		document.getElementById("ag").innerHTML = http.response; // HTML에 내용을 출力

		http.open("GET", "./realty/agree2.txt", false);
		http.send();
		document.getElementById("ag2").innerHTML = http.response;
	}

	function gopage() {
		var url = "http://naver.com";
		setTimeout(function() {
			location.href = url;
		}, 5000);

		// setTimeout(gopage,3000); 1000 => 1초
	}
</script>
</html>